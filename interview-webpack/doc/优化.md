# 解决依赖重复打包的问题有三种方式

1. 配置路径别名，强制使用统一路径(前提是这个依赖必须支持 es6 module 引入方式。不然也只是拷贝)
2. 使用 dll 打包
3. 使用 cdn 加速（配置 externals 打包的时候忽略，采用 cdn 引入方式）

## 总结 加缓存，搞并行，提前做，少执行

在小型项目中，添加过多的优化配置，作用不大，反而会因为额外的 loader、plugin 增加构建时间。
在加快构建时间方面，作用最大的是配置 cache，可大大加快二次构建速度。
在减小打包体积方面，作用最大的是压缩代码、分离重复代码、Tree Shaking，可最大幅度减小打包体积。
在加快加载速度方面，按需加载、浏览器缓存、CDN 效果都很显著
## webpack性能优化分为生产环境调优和开发环境调优。
优化构建速度 升级新版本 优化搜索文件 解决依赖重复打包的问题 开启多进程loader转换
优化开发体验-开启模块热更新HMR 
优化输出质量-压缩文件体积
1.生产环境调优主要是通过利用缓存、减少代码体积、分包等方式提升页面响应速度。对于spa单页的话通常需要通过优化减少首屏渲染时间。
2.开发环境调优的目的是提升webpack构建速度。如开启热更新和热模块（HMR）替换、缩小代码编译范围、多线程打包等
### 优化构建速度

1. speed-measure-webpack-plugin 插件 适用于 v4 版本 在 webpack5.x 中 不兼容 分析模块打包时间
2. 优化 resolve 配置
3. 缩小范围 loader 缩小范围
4. 多进程配置 thread-loader 在小型项目中，开启多进程打包反而会增加时间成本，因为启动进程和进程间通信都会有一定开销
5. 升级 v5 版本 因为 cache 持久化缓存

### 优化构建结果

1. webpack-bundle-analyzer 分析模块打包大小
2. 压缩 css optimize-css-assets-webpack-plugin 压缩 css
3. 压缩 js webpack5 内置了 terser-webpack-plugin（在生成环境下打包默认会开启 js 压缩，但是当我们手动配置 optimization 选项之后，就不再默认对 js 进行压缩，需要我们手动去配置）
4. Tree-shaking 和 Scope Hoisting

### 优化运行时体验

1. 运行时优化的核心就是提升首屏的加载速度，主要的方式就是降低首屏加载文件体积，首屏不需要的文件进行预加载或者按需加载
2. 分包 optimization.splitChunks 是基于 SplitChunksPlugin
3. 代码延迟加载
4. prefetch 浏览器空闲的时候进行资源的拉取 与 preload 提前加载后面会用到的关键资源

